#!/bin/bash
# Navigate to project root directory
cd {{ repo_root_dir }}

# Create build and install directory
mkdir build
mkdir install

# Build as release version
cd build
cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_CXX_STANDARD={{ cpp_version }} {{ '-DCMAKE_POSITION_INDEPENDENT_CODE=True' if pic }} {{ '-DYYCC_BUILD_DOC=ON' if build_doc }} {{ '-DYYCC_BUILD_TESTBENCH=ON' if build_testbench }} ../.. --fresh
cmake --build .
cmake --install . --prefix ../install

# Exit to original path
cd ..
echo "YYCC Linux CMake build done"
